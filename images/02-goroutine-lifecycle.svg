<?xml version="1.0" encoding="UTF-8"?>
<svg width="700" height="350" viewBox="0 0 700 350" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#8b949e"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00ADD8"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="700" height="350" fill="#0d1117"/>

  <!-- Title -->
  <text x="350" y="30" font-family="Arial, sans-serif" font-size="18" fill="#c9d1d9" text-anchor="middle" font-weight="bold">Goroutine Lifecycle</text>

  <!-- States -->
  <!-- Runnable -->
  <g transform="translate(100, 120)">
    <rect x="-50" y="-25" width="100" height="50" rx="25" fill="#10b981" opacity="0.2" stroke="#10b981" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial, sans-serif" font-size="12" fill="#10b981" text-anchor="middle" font-weight="bold">Runnable</text>
    <text x="0" y="45" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">In run queue</text>
  </g>

  <!-- Running -->
  <g transform="translate(350, 120)">
    <rect x="-50" y="-25" width="100" height="50" rx="25" fill="#00ADD8" opacity="0.2" stroke="#00ADD8" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial, sans-serif" font-size="12" fill="#00ADD8" text-anchor="middle" font-weight="bold">Running</text>
    <text x="0" y="45" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">On CPU (via M)</text>
  </g>

  <!-- Waiting -->
  <g transform="translate(600, 120)">
    <rect x="-50" y="-25" width="100" height="50" rx="25" fill="#f97316" opacity="0.2" stroke="#f97316" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial, sans-serif" font-size="12" fill="#f97316" text-anchor="middle" font-weight="bold">Waiting</text>
    <text x="0" y="45" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">Blocked on I/O</text>
  </g>

  <!-- Dead -->
  <g transform="translate(350, 280)">
    <rect x="-50" y="-25" width="100" height="50" rx="25" fill="#6e7681" opacity="0.2" stroke="#6e7681" stroke-width="2"/>
    <text x="0" y="5" font-family="Arial, sans-serif" font-size="12" fill="#6e7681" text-anchor="middle" font-weight="bold">Dead</text>
    <text x="0" y="45" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">Completed</text>
  </g>

  <!-- Arrows -->
  <!-- go func() -->
  <path d="M30 80 Q30 120 50 120" stroke="#10b981" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="15" y="75" font-family="Consolas, monospace" font-size="10" fill="#10b981">go func()</text>

  <!-- Runnable -> Running -->
  <path d="M155 120 L295 120" stroke="#8b949e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="225" y="110" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">scheduled</text>

  <!-- Running -> Runnable (preempted) -->
  <path d="M295 100 Q225 70 155 100" stroke="#8b949e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="225" y="65" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">preempted</text>

  <!-- Running -> Waiting -->
  <path d="M405 120 L545 120" stroke="#8b949e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="475" y="110" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">I/O, chan, lock</text>

  <!-- Waiting -> Runnable -->
  <path d="M545 140 Q350 200 155 140" stroke="#8b949e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="350" y="195" font-family="Consolas, monospace" font-size="9" fill="#8b949e" text-anchor="middle">event ready</text>

  <!-- Running -> Dead -->
  <path d="M350 150 L350 250" stroke="#8b949e" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
  <text x="365" y="200" font-family="Consolas, monospace" font-size="9" fill="#8b949e">return</text>

  <!-- Legend -->
  <g transform="translate(50, 320)">
    <circle cx="6" cy="6" r="6" fill="#10b981"/>
    <text x="18" y="10" font-family="Arial, sans-serif" font-size="10" fill="#8b949e">Ready to run</text>

    <circle cx="126" cy="6" r="6" fill="#00ADD8"/>
    <text x="138" y="10" font-family="Arial, sans-serif" font-size="10" fill="#8b949e">Executing</text>

    <circle cx="226" cy="6" r="6" fill="#f97316"/>
    <text x="238" y="10" font-family="Arial, sans-serif" font-size="10" fill="#8b949e">Blocked</text>

    <circle cx="306" cy="6" r="6" fill="#6e7681"/>
    <text x="318" y="10" font-family="Arial, sans-serif" font-size="10" fill="#8b949e">Finished</text>
  </g>
</svg>
